---
# Temporal Dimensions Configuration
# Defines date/time dimensions with SQL expressions for grouping

temporal_dimensions:
  - name: "month"
    display_name: "Month"
    description: "Monthly grouping (YYYY-MM format)"
    type: "temporal"
    granularity: "month"
    sql: "strftime('%Y-%m', {{ Table }}.month)"

  - name: "year"
    display_name: "Year"
    description: "Yearly grouping (YYYY format)"
    type: "temporal"
    granularity: "year"
    sql: "strftime('%Y', {{ Table }}.month)"

  - name: "quarter"
    display_name: "Quarter"
    description: "Quarterly grouping (YYYY-Q# format)"
    type: "temporal"
    granularity: "quarter"
    sql: "strftime('%Y', {{ Table }}.month) || '-Q' || CAST((CAST(strftime('%m', {{ Table }}.month) AS INTEGER) + 2) / 3 AS TEXT)"

  - name: "year_month"
    display_name: "Year-Month"
    description: "Year and month for time series analysis"
    type: "temporal"
    granularity: "month"
    sql: "strftime('%Y-%m', {{ Table }}.month)"

  - name: "subscription_start_month"
    display_name: "Subscription Start Month"
    description: "Month when subscription started"
    type: "temporal"
    granularity: "month"
    table: "subscriptions"
    sql: "strftime('%Y-%m', {{ Table }}.subscription_start_date)"

  - name: "signup_month"
    display_name: "Signup Month"
    description: "Month when customer signed up"
    type: "temporal"
    granularity: "month"
    table: "customers"
    sql: "strftime('%Y-%m', {{ Table }}.signup_date)"
